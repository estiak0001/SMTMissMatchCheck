@model WebAppEs.ViewModel.QCCheck.MobileRND_QcTaskHead_VM
@{
    ViewData["Title"] = "QC Check";
}
<style>
    .bootstrap-select > .dropdown-toggle.bs-placeholder, .bootstrap-select > .dropdown-toggle.bs-placeholder:hover, .bootstrap-select > .dropdown-toggle.bs-placeholder:focus, .bootstrap-select > .dropdown-toggle.bs-placeholder:active {
        color: #000;
    }

    .bootstrap-select .dropdown-toggle:focus {
        outline: none !important;
        outline: none !important;
        outline-offset: -2px;
    }

    .bootstrap-select:not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn) {
        width: 100%;
    }
    .bacColor {
        background: #ffd7001a !important;
    }

    .bacColor2 {
        background: #bdff9340 !important;
    }

    .mapColor {
        background: red !important;
        color:white;
    }
    .validation-summary-errors {
        text-align: center;
        color: red;
        font-weight: 700;
    }
    .MatchedData {
        text-align: center;
        background: green;
        color: white;
        /* font-size: 25px; */
        border: 1px solid;
        border-radius: 43px;
        padding:0px;
    }
    .NotMatchedData {
        text-align: center;
        background: #c50404;
        color: white;
        /* font-size: 25px; */
        border: 1px solid;
        border-radius: 43px;
        padding: 0px;
    }
</style>
<div class="container">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="breadcomb-list">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="breadcomb-wp">
                            <div class="breadcomb-icon">
                                <i class="notika-icon notika-form"></i>
                            </div>
                            <div class="breadcomb-ctn">
                                <h2 style="margin:13px;">QC Check</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-3">
                        <div class="breadcomb-report">
                            <a style="float:right" asp-action="Index" class="btn btn-defaults btn-icon-notika"><i class="notika-icon notika-back"></i> Back to List</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <input id="TaskheadID" hidden value="@Model.Id" />
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="form-example-wrap mg-t-10">
                <div class="cmp-tb-hd cmp-int-hd">
                    <h2>Select Model and Lot to Start Checking</h2>
                </div>
                <div class="row">
                    <form method="post" id="myFormId">

                        <p> @Html.ValidationSummary() </p>

                        @if (Model.IsUpdate == "Update")
                        {
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            <select disabled id="ddlLine" required asp-for="LineNo" class="selectpicker" data-live-search="true">
                                                <option value="@Model.LineNo">--Select Line--</option>
                                                <option value="1">Line 1</option>
                                                <option value="2">Line 2</option>
                                                <option value="3">Line 3</option>
                                                <option value="4">Line 4</option>
                                                <option value="5">Line 5</option>
                                                <option value="6">Line 6</option>
                                                <option value="7">Line 7</option>
                                                <option value="8">Line 8</option>
                                                <option value="9">Line 9</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            <select disabled id="ddlModel" required asp-for="ModelID" class="selectpicker" data-live-search="true">
                                                <option value="">--Select Model--</option>
                                                @foreach (var item in Model.PartsModelViewModel)
                                                {
                                                    <option value="@item.ID">@item.Name</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            @*<label style="">Model</label>*@
                                            <select disabled style="color: black; width:100%" id="ddlLot" asp-for="LotNo" required class="selectpicker">
                                                <option value="">--Select Lot--</option>
                                                <option value="1st">1st</option>
                                                <option value="2nd">2nd</option>
                                                <option value="3rd">3rd</option>
                                                <option value="4th">4th</option>
                                                <option value="5th">5th</option>
                                                <option value="6th">6th</option>
                                                <option value="7th">7th</option>
                                                <option value="8th">8th</option>
                                                <option value="9th">9th</option>
                                                <option value="10th">10th</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            @*<label style="">Model</label>*@
                                            <select disabled style="color: black; width: 100%" id="ddlType" asp-for="TaskType" required class="selectpicker">
                                                <option value="">--Select Type--</option>
                                                <option value="sequential">Sequential</option>
                                                <option value="random">Random</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        else
                        {
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            <select id="ddlLine" required asp-for="LineNo" class="selectpicker" data-live-search="true">
                                                <option value="@Model.LineNo">--Select Line--</option>
                                                <option value="1">Line 1</option>
                                                <option value="2">Line 2</option>
                                                <option value="3">Line 3</option>
                                                <option value="4">Line 4</option>
                                                <option value="5">Line 5</option>
                                                <option value="6">Line 6</option>
                                                <option value="7">Line 7</option>
                                                <option value="8">Line 8</option>
                                                <option value="9">Line 9</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            <select id="ddlModel" required asp-for="ModelID" class="selectpicker" data-live-search="true">
                                                <option value="">--Select Model--</option>
                                                @foreach (var item in Model.PartsModelViewModel)
                                                {
                                                    <option value="@item.ID">@item.Name</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            @*<label style="">Model</label>*@
                                            <select style="color: black; width:100%" id="ddlLot" asp-for="LotNo" required class="selectpicker">
                                                <option value="">--Select Lot--</option>
                                                <option value="1st">1st</option>
                                                <option value="2nd">2nd</option>
                                                <option value="3rd">3rd</option>
                                                <option value="4th">4th</option>
                                                <option value="5th">5th</option>
                                                <option value="6th">6th</option>
                                                <option value="7th">7th</option>
                                                <option value="8th">8th</option>
                                                <option value="9th">9th</option>
                                                <option value="10th">10th</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="form-example-int form-example-st">
                                    <div class="form-group">
                                        <div class="nk-int-st">
                                            @*<label style="">Model</label>*@
                                            <select style="color: black; width: 100%" id="ddlType" asp-for="TaskType" required class="selectpicker">
                                                <option value="">--Select Type--</option>
                                                <option value="sequential">Sequential</option>
                                                <option value="random">Random</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-12">
                                <div class="form-example-int" style="text-align:center">
                                    <button style=" background: white; border: 2px solid #00c292; padding: 2px;" data-toggle="tooltip" data-placement="top" title="Start Checking" type="submit" class="btn btn-lg btn-outline-light notika-btn-default"><img style="max-width: 100%; height: 38px;" src="~/Gif/checking.gif" /></button>
                                </div>
                            </div>
                        }

                    </form>
                </div>
            </div>
        </div>
    </div>

    <input id="locatedPartNumber" class="currentLocationPartNumber" hidden value="@Model.GetTopOrderValue.PartNumber" />
    <input id="txtModuler" hidden value="@Model.GetTopOrderValue.Moduler" />
    <input id="txtFeeder" hidden value="@Model.GetTopOrderValue.Feeder" />
    <input id="txtDetailsID" hidden value="@Model.GetTopOrderValue.StoreDetailsID" />

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div style=" border: 1px solid white; border-radius: 9px; background: ivory;" class="form-example-wrap mg-t-10">
                <div class="cmp-tb-hd cmp-int-hd">
                    <h2 style="color:navy" id="blinkhead">Current Checking Location</h2>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-example-int form-example-st">
                            <div class="form-group">
                                <div class="nk-int-st">
                                    <label style=" margin: 4px; font-size: medium; font-weight: bolder; color: #1466bb;">Location: <input disabled id="txtDisabledLocation" style="color: black; font-size: x-large;" value="@Model.GetTopOrderValue.Location" /></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-example-int form-example-st">
                            <div class="form-group">
                                <div class="nk-int-st">
                                    <label style=" margin: 4px; font-size: medium; font-weight: bolder; color: #1466bb;">Part Number: <input style="color: black; font-size: x-large;" disabled id="txtDisablePartCode" value="@Model.GetTopOrderValue.PartNumber" /></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <label class="txtErrorMessage" style="color:red; padding:5px; display:none"><span><i class="fa fa-exclamation-triangle"></i></span> No data found!</label>
                </div>
            </div>
        </div>
    </div>
    <div class=" row">
        <div class="  col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div style="display:none" class="MatchedData form-example-wrap mg-t-10">
                <p style="font-size: 23px; padding: 11px; margin: 0px; ">Matched</p>
            </div>
            <div style="display:none" class="NotMatchedData form-example-wrap mg-t-10">
                <p style="font-size: 23px; padding: 11px; margin: 0px; ">Not Matched</p>
            </div>
        </div>
    </div>

    <div id="randomDiv" style="@Model.isDisable">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div style=" border: 1px solid powderblue; border-radius: 9px;" class="form-example-wrap mg-t-10">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                            <div class="form-example-int form-example-st">
                                <div class="form-group">
                                    <div style="text-align:center" class="nk-int-st">
                                        <label style=" margin: 4px; font-size: large; font-weight: bolder; color: navy;">Scan From Moduler</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                            <div class="form-example-int form-example-st">
                                <div class="form-group">
                                    <div class="nk-int-st">
                                        <input onkeyup="RandomScanFromModuler()" class="txtRandomModulerScan form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div style=" border: 1px solid powderblue; border-radius: 9px;" class="form-example-wrap mg-t-10">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                            <div class="form-example-int form-example-st">
                                <div class="form-group">
                                    <div style="text-align:center" class="nk-int-st">
                                        <label style=" margin: 4px; font-size: large; font-weight: bolder; color: navy;">Scan From Reel</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                            <div class="form-example-int form-example-st">
                                <div class="form-group">
                                    <div class="nk-int-st">
                                        <input onkeyup="randomScanFromReel()" class="txtRandomReelScan form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <audio id="chatAudio" style="display:none" controls="controls"><source src="~/NotifySound/notifyWarningSound.wav" type="audio/mpeg" /></audio>

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div style=" border: 1px solid powderblue; border-radius: 9px;" class="form-example-wrap mg-t-10">
                <div class="data-table-list">
                    <div class="table-responsive">
                        <table id="data-table-basicww" class="table table-condensed">
                            <thead>
                                <tr>
                                    <th hidden>

                                    </th>
                                    <th style="text-align:center">
                                        SL#
                                    </th>
                                    <th style="text-align:center">
                                        Location
                                    </th>
                                    <th style="text-align:center">
                                        Part Number
                                    </th>
                                    <th style="text-align:center">
                                        Feeder Name
                                    </th>
                                    <th style="text-align:center">
                                        Moduler
                                    </th>
                                    <th style="text-align:center">
                                        Reel
                                    </th>
                                    @*<th style="text-align:center">
                                        </th>*@
                                    <th style="text-align:center">
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.MobileRND_QcTaskHeadDetails_VM.Count() != 0)
                                {
                                    @foreach (var row in Model.MobileRND_QcTaskHeadDetails_VM)
                                    {
                                        //count++;
                                        @*<td style="text-align: center; vertical-align: middle;"><input class="qrcodeclass_01_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode1" onkeyup="barcode1(@count)"></td>*@

                                        @if (Model.IsUpdate == "Update")
                                        {
                                            if (row.Status == true)
                                            {
                                                var count = row.SLNO;
                                                <tr id="table_@count" class="table_row_@count bacColor2">
                                                    <td hidden class="DetailsId_@count" style="text-align: center; vertical-align: middle;">@row.Id</td>
                                                    <td class="rowID_@count no-sort" style="text-align: center; vertical-align: middle;">@count</td>
                                                    <td class="location_@count" style="text-align: center; vertical-align: middle;">@row.Location</td>
                                                    <td class="partNumber_@count" style="text-align: center; vertical-align: middle;">@row.PartNumber</td>
                                                    <td style="text-align: center; vertical-align: middle;">@row.FeederName</td>
                                                    <td style="text-align: center; vertical-align: middle;"><input disabled class="dbclasss qrcodeclass_01_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_01_@count" onkeyup="barcode1(@count)"></td>
                                                    <td style="text-align: center; vertical-align: middle;"><input disabled class="dbclasss qrcodeclass_02_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_02_@count" onkeyup="barcode2(@count)"></td>
                                                    <td style="text-align: center; padding: 0px; vertical-align: middle;"><i style="color: green; font-size: 29px;" class="status2_@count fa fa-check-circle"></i></td>
                                                </tr>
                                            }
                                            else
                                            {
                                                var count = row.SLNO;
                                                <tr id="table_@count" class="table_row_@count bacColor">
                                                    <td hidden class="DetailsId_@count" style="text-align: center; vertical-align: middle;">@row.Id</td>
                                                    <td class="rowID_@count no-sort" style="text-align: center; vertical-align: middle;">@count</td>
                                                    <td class="location_@count" style="text-align: center; vertical-align: middle;">@row.Location</td>
                                                    <td class="partNumber_@count" style="text-align: center; vertical-align: middle;">@row.PartNumber</td>
                                                    <td style="text-align: center; vertical-align: middle;">@row.FeederName</td>
                                                    <td style="text-align: center; vertical-align: middle;"><input class="dbclasss qrcodeclass_01_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_01_@count" onkeyup="barcode1(@count)"></td>
                                                    <td style="text-align: center; vertical-align: middle;"><input class="dbclasss qrcodeclass_02_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_02_@count" onkeyup="barcode2(@count)"></td>
                                                    <td style="text-align: center; padding: 0px; vertical-align: middle;"><i style="color: red; font-size: 29px; " class="status1_@count fa fa-times-circle"></i><i style="color: green; font-size: 29px; display:none" class="status2_@count fa fa-check-circle"></i></td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            var count = row.SLNO;
                                            <tr id="table_@count" class="table_row_@count">
                                                <td hidden class="DetailsId_@count" style="text-align: center; vertical-align: middle;">@row.Id</td>
                                                <td class="rowID_@count no-sort" style="text-align: center; vertical-align: middle;">@count</td>
                                                <td class="location_@count" style="text-align: center; vertical-align: middle;">@row.Location</td>
                                                <td class="partNumber_@count" style="text-align: center; vertical-align: middle;">@row.PartNumber</td>
                                                <td style="text-align: center; vertical-align: middle;">@row.FeederName</td>
                                                <td style="text-align: center; vertical-align: middle;"><input class="dbclasss qrcodeclass_01_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_01_@count" onkeyup="barcode1(@count)"></td>
                                                <td style="text-align: center; vertical-align: middle;"><input class="dbclasss qrcodeclass_02_@count form-control form-control-sm" type="text" name="yes" id="txtBarCode_02_@count" onkeyup="barcode2(@count)"></td>
                                                <td style="text-align: center; padding: 0px; vertical-align: middle;"><i style="color: red; font-size: 29px; display:none" class="status1_@count fa fa-times-circle"></i><i style="color: green; font-size: 29px; display:none" class="status2_@count fa fa-check-circle"></i></td>
                                            </tr>
                                        }

                                    }
                                }

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        $(document).ready(function () {

            //$(window).scroll(function (e) {
            //    var $el = $('.fixedElement');
            //    var isPositionFixed = ($el.css('position') == 'fixed');
            //    if ($(this).scrollTop() > 200 && !isPositionFixed) {
            //        $el.css({ 'position': 'fixed', 'top': '0px' });
            //    }
            //    if ($(this).scrollTop() < 200 && isPositionFixed) {
            //        $el.css({ 'position': 'static', 'top': '0px' });
            //    }
            //});


            @*$("form").on("submit", function (e) {
                event.preventDefault();
                var mydata = $("#myFormId").serialize();
                //var data = {
                //    ModelID: $('#ddlModel').val().trim(),
                //    LotNo: $('#ddlLot').val().trim(),
                //    TaskType: $('#ddlType').val().trim()
                //    }
                console.log(mydata);
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("CreateTask", "QCCheck")',
                    data: mydata,
                    dataType: "JSON",
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    success: function () {
                        window.location.href = '@Url.Action("Index", "QCCheck")';
                    }
                });
            });*@

            $('#ddlType').on('change', function () {
                if ($('#ddlType').val() == "random") {
                    $('#randomDiv').show();
                }
                else {
                    $('#randomDiv').hide();
                }
            });

            $('#data-table-basicww').dataTable({
                "ordering": false
            });

        });
        var QRCODE1 = "";
        var QRCODE2 = "";
        var IsModulerScan = false;

        function barcode1(c1) {

            var inp1 = $(".qrcodeclass_01_" + c1);

            //var tbl = document.getElementById("myTable");
            if (event.keyCode == 13) {
                if (inp1.val().length > 0) {

                    //var textOfTd = $("#data-table-basic").find(".rowID_" + c2).text();
                    var Location = inp1.val().split("-");
                    var moduler = Location[0].trim();
                    var Feeder = Location[1].trim();

                    var locatedModuler = $("#txtModuler").val().trim();
                    var locatedFeeder = $("#txtFeeder").val().trim();
                    if (moduler == locatedModuler && Feeder == locatedFeeder) {
                        IsModulerScan = true;
                        $("body").css("background-color", "#f0f0f0");
                        $(".qrcodeclass_01_" + c1).removeClass("mapColor");
                        var $canfocus = $(':focusable');
                        var index = $canfocus.index(document.activeElement) + 1;
                        if (index >= $canfocus.length) index = 0;
                        $canfocus.eq(index).focus();

                        QRCODE1 = "";
                        QRCODE2 = "";
                    }
                    else {
                        $(".qrcodeclass_01_" + c1).addClass("mapColor");
                        $("body").css("background-color", "red");
                        $('#chatAudio')[0].play();
                        $(".qrcodeclass_01_" + c1).val('');
                        $(".qrcodeclass_02_" + c1).val('');

                        QRCODE1 = "";
                        QRCODE2 = "";
                    }
                } else {
                    //alert("Barcode length insufficient");
                    inp1.val('');
                }
            }
    }
        function barcode2(c2) {
            var inp1 = $(".qrcodeclass_01_" + c2);
            var inp2 = $(".qrcodeclass_02_" + c2);
            var inp3 = $("#locatedPartNumber");
            //var tbl = document.getElementById("myTable");
            if (event.keyCode == 13) {
                if ((inp2.val().length > 0) && (IsModulerScan == true) && (inp1.val() != "")) {
                    QRCODE1 = inp2.val();
                    QRCODE2 = "";
                    QRCODE2 = inp3.val();

                    console.log(QRCODE1);
                    console.log(QRCODE2, "test");

                    if (QRCODE1 === QRCODE2) {
                        IsModulerScan = false;
                        var ID = $(".DetailsId_" + c2).text();
                        var Status = true;
                        var data = {
                            Id: ID,
                            Status: Status
                        }
                        $.ajax({
                             data: data,
                             url: '@Url.Action("UpdateQCScanData", "QCCheck")',
                             type: 'GET',
                             dataType: "JSON",
                             contentType: "application/json",
                            success: function (response) {

                                if (response.isSuccess) {
                                    $(".table_row_" + c2).removeClass("bacColor");
                                    $(".table_row_" + c2).addClass("bacColor2");
                                    //$(".qrcodeclass_01_" + c2).removeClass("checkedclass2")
                                    $(".qrcodeclass_02_" + c2).removeClass("mapColor")
                                    $(".qrcodeclass_01_" + c2).addClass("checkedclass");
                                    $(".qrcodeclass_02_" + c2).addClass("checkedclass");
                                    $('.status2_' + c2).show();
                                    $('.status1_' + c2).hide();
                                    //next Input
                                    var $canfocus = $(':focusable');
                                    var index = $canfocus.index(document.activeElement) + 1;
                                    if (index >= $canfocus.length) index = 0;
                                    $canfocus.eq(index).focus();
                                    QRCODE1 = "";
                                    QRCODE2 = "";
                                    var HeadID = $("#TaskheadID").val();
                                    $.ajax({
                                        data: { HeadID: HeadID},
                                         url: '@Url.Action("GetCurrentLocation", "QCCheck")',
                                         type: 'GET',
                                         dataType: "JSON",
                                         contentType: "application/json",
                                        success: function (response) {
                                            console.log(response);
                                            $("#txtModuler").val(response.moduler);
                                            $("#txtFeeder").val(response.feeder);
                                            $("#txtDisabledLocation").val(response.location);
                                            $("#locatedPartNumber").val(response.partNumber);
                                            $("#txtDisablePartCode").val(response.partNumber);
                                        }
                                     });

                                } else {
                                    $(".table_row_" + c2).addClass("bacColor");
                                    $('#chatAudio')[0].play();
                                    //$(".qrcodeclass_01_" + c2).addClass("checkedclass2");
                                    $(".qrcodeclass_02_" + c2).addClass("checkedclass2");
                                    $('.status2_' + c2).hide();
                                    $('.status1_' + c2).show();
                                    $(".qrcodeclass_01_" + c2).val('');
                                    $(".qrcodeclass_02_" + c2).val('');
                                    QRCODE1 = "";
                                    QRCODE2 = "";
                                }
                            }
                        });
                    }
                    else {

                        var ID = $(".DetailsId_" + c2).text();
                        var Status = false;
                        var data = {
                            Id: ID,
                            Status: Status
                        }
                        $.ajax({
                             data: data,
                             url: '@Url.Action("UpdateQCScanData", "QCCheck")',
                             type: 'GET',
                             dataType: "JSON",
                             contentType: "application/json",
                            success: function (response) {

                                if (response.isSuccess) {
                                    $(".table_row_" + c2).addClass("bacColor");
                                    $('#chatAudio')[0].play();
                                    //$(".qrcodeclass_01_" + c2).addClass("checkedclass2");
                                    $(".qrcodeclass_02_" + c2).addClass("mapColor");
                                    $('.status2_' + c2).hide();
                                    $('.status1_' + c2).show();
                                    $(".qrcodeclass_02_" + c2).val('');
                                    //next Input

                                    QRCODE1 = "";
                                    QRCODE2 = "";
                                    var HeadID = $("#TaskheadID").val();
                                    $.ajax({
                                        data: { HeadID: HeadID},
                                         url: '@Url.Action("GetCurrentLocation", "QCCheck")',
                                         type: 'GET',
                                         dataType: "JSON",
                                         contentType: "application/json",
                                        success: function (response) {
                                            console.log(response);
                                            $("#txtModuler").val(response.moduler);
                                            $("#txtFeeder").val(response.feeder);

                                            $("#txtDisabledLocation").val(response.location);
                                            $("#locatedPartNumber").val(response.partNumber);

                                            $("#txtDisablePartCode").val(response.partNumber);
                                        }
                                     });

                                } else {
                                    $(".table_row_" + c2).addClass("bacColor");
                                    $('#chatAudio')[0].play();
                                    $(".qrcodeclass_01_" + c2).addClass("checkedclass2");
                                    $(".qrcodeclass_02_" + c2).addClass("mapColor");
                                    $('.status2_' + c2).hide();
                                    $('.status1_' + c2).show();
                                    $(".qrcodeclass_01_" + c2).val('');
                                    $(".qrcodeclass_02_" + c2).val('');
                                    QRCODE1 = "";
                                    QRCODE2 = "";
                                }
                            }
                        });

                        QRCODE1 = "";
                        QRCODE2 = "";
                    }
                } else {
                    //alert("Barcode length insufficient");
                    inp2.val('');
                    $(".qrcodeclass_01_" + c2).addClass("mapColor");
                    $("body").css("background-color", "red");
                    $('#chatAudio')[0].play();
                    $(".qrcodeclass_01_" + c2).val('');
                    $(".qrcodeclass_02_" + c2).val('');

                    var $canfocus = $(':focusable');
                    var index = $canfocus.index(document.activeElement) - 1;
                    if (index >= $canfocus.length) index = 0;
                    $canfocus.eq(index).focus();
                }
            }
        }

        function RandomScanFromModuler() {
            var taskHeadID = $("#TaskheadID")

            var inp1 = $(".txtRandomModulerScan");

            //var tbl = document.getElementById("myTable");
            if (event.keyCode == 13) {

                if ((inp1.val().length > 0) && (taskHeadID.val() != "00000000-0000-0000-0000-000000000000")) {
                    var headID = $("#TaskheadID").val();
                    //var textOfTd = $("#data-table-basic").find(".rowID_" + c2).text();
                    var Location = inp1.val().split("-");
                    var moduler = Location[0].trim();
                    var Feeder = Location[1].trim();

                    var ModelID = $("#ddlModel").val();
                    var Lot = $("#ddlLot").val();

                                    $.ajax({
                                        data: { TaskHeadID: headID, ModelID: ModelID, lot: Lot, Moduler: moduler, feeder: Feeder},
                                         url: '@Url.Action("GetCurrentLocationForRandom", "QCCheck")',
                                         type: 'GET',
                                         dataType: "JSON",
                                         contentType: "application/json",
                                        success: function (response) {
                                            console.log(response);
                                            if (response == null) {
                                                $('#chatAudio')[0].play();
                                                $(".txtRandomModulerScan").addClass("mapColor");
                                                $(".txtErrorMessage").show();
                                                inp1.val('');
                                            }
                                            else {
                                                $(".txtRandomModulerScan").removeClass("mapColor");
                                                $(".txtErrorMessage").hide();
                                                $("#txtModuler").val(response.moduler);
                                                $("#txtFeeder").val(response.feeder);

                                                $("#txtDisabledLocation").val(response.location);
                                                $("#locatedPartNumber").val(response.partNumber);

                                                $("#txtDisablePartCode").val(response.partNumber);
                                                $("#txtDetailsID").val(response.storeDetailsID);

                                                var $canfocus = $(':focusable');
                                                var index = $canfocus.index(document.activeElement) + 1;
                                                if (index >= $canfocus.length) index = 0;
                                                $canfocus.eq(index).focus();
                                            }
                                        }
                                     });
                } else {
                    //alert("Start Checking first..");
                    swal("Error!", "Start Checking first..", "error");
                    inp1.val('');
                }
            }
        }
        function randomScanFromReel() {
            var mm = $(".txtRandomModulerScan");
            var inp2 = $(".txtRandomReelScan");
            var inp3 = $("#locatedPartNumber");
            //var tbl = document.getElementById("myTable");
            if (event.keyCode == 13) {
                if (inp2.val().length > 0) {
                    QRCODE1 = inp2.val();
                    QRCODE2 = "";
                    QRCODE2 = inp3.val();

                    console.log(QRCODE1);
                    console.log(QRCODE2, "test");

                    if (QRCODE1 === QRCODE2) {

                        var StoreDetailsID = $("#txtDetailsID").val();
                        var TaskHeadID = $("#TaskheadID").val();
                        var Status = true;
                        var data = {
                            StoreDetailsId: StoreDetailsID,
                            TaskHeadID: TaskHeadID,
                            Status: Status
                        }
                        $.ajax({
                             data: data,
                             url: '@Url.Action("AddQCRandomScanData", "QCCheck")',
                             type: 'GET',
                             dataType: "JSON",
                             contentType: "application/json",
                            success: function (response) {

                                console.log(response);

                                $(".txtRandomModulerScan").removeClass("mapColor");
                                $(".txtRandomReelScan").removeClass("mapColor");
                                $(".txtErrorMessage").hide();
                                $(".MatchedData").show();
                                $(".NotMatchedData").hide();
                                inp2.val('');
                                inp3.val('');
                                mm.val('');
                                var $canfocus = $(':focusable');
                                var index = $canfocus.index(document.activeElement) - 1;
                                if (index >= $canfocus.length) index = 0;
                                $canfocus.eq(index).focus();
                                QRCODE1 = "";
                                QRCODE2 = "";
                            }
                        });
                    }
                    else {
                        
                        var StoreDetailsID = $("#txtDetailsID").val();
                        var TaskHeadID = $("#TaskheadID").val();
                        var Status = false;
                        var data = {
                            StoreDetailsId: StoreDetailsID,
                            TaskHeadID: TaskHeadID,
                            Status: Status
                        }
                        $.ajax({
                             data: data,
                             url: '@Url.Action("AddQCRandomScanData", "QCCheck")',
                             type: 'GET',
                             dataType: "JSON",
                             contentType: "application/json",
                            success: function (response) {
                                $('#chatAudio')[0].play();
                                $(".txtRandomReelScan").addClass("mapColor");
                                $(".MatchedData").hide();
                                $(".NotMatchedData").show();

                                inp2.val('');
                                inp3.val('');
                                mm.val('');
                                var $canfocus = $(':focusable');
                                var index = $canfocus.index(document.activeElement) - 1;
                                if (index >= $canfocus.length) index = 0;
                                $canfocus.eq(index).focus();
                                QRCODE1 = "";
                                QRCODE2 = "";
                            }
                        });

                        QRCODE1 = "";
                        QRCODE2 = "";
                    }
                } else {
                    //alert("Barcode length insufficient");
                    inp2.val('');
                    inp3.val('');
                }
            }
    }
    </script>
}
    


